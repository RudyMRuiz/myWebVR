<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
    <title>Hello WebGL</title>
	<meta name="generator" content="BBEdit 10.5" />

    <!-- load matrix manipulation helper methods -->	
    <script type="text/javascript" src="gl-matrix.js"></script>
    

    <!-- define our shaders -->
    <script id="shader-fs" type="x-shader/x-fragment">
        precision mediump float;

        varying vec2 vTextureCoord;
        varying highp vec3 vLighting;

        uniform sampler2D uSampler;

        void main(void) {
            highp vec4 texelColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));

            gl_FragColor = vec4(texelColor.rgb * vLighting, texelColor.a);
            //gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));
            //gl_FragColor = vec4(0.0, 0.0, 0.5, 1.0);
        }
    </script>

    
    <script id="shader-vs" type="x-shader/x-vertex">
        attribute vec4 aVertexPosition;
        attribute vec3 aVertexNormal;
        attribute vec2 aTextureCoord;

        uniform mat4 uMVMatrix;
        uniform mat4 uPMatrix;
        uniform mat4 uNormalMatrix;

        varying highp vec2 vTextureCoord;
        varying highp vec3 vLighting;

        void main(void) {
            gl_Position = uPMatrix * uMVMatrix * aVertexPosition;
            vTextureCoord = aTextureCoord;

            // Apply lighting effect
            highp vec3 ambientLight = vec3(0.3, 0.3, 0.3);
            highp vec3 directionalLightColor = vec3(1, 1, 1);
            highp vec3 directionalVector = normalize(vec3(0.85, 0.8, 0.75));
            highp vec4 transformedNormal = uNormalMatrix * vec4(aVertexNormal, 1.0);
            highp float directional = max(dot(transformedNormal.xyz, directionalVector), 0.0);
            vLighting = ambientLight + (directionalLightColor * directional);
            
        }
    </script>

</head>

<!-- declare the "body" of the HTML document-->
<!-- the onload attribute specifies a javascript function to execute when the body tag is loaded into the browser -->

    <body onload="startWebVR()">
        <h1>Hello WebGL Simple Example</h1>

        <!-- embed the HTML5 Canvas Drawing object on the page.-->
        <!-- Name the canvas 'hellowebgl' for the javascript code. -->
        <canvas id="glcanvas" width=640 height=480>
            If you're seeing this your web browser doesn't support the &lt;canvas>&gt; element. Ouch!
        </canvas>
        
    </body>
    <script type="text/javascript" src="myWebVR.js"></script>
    
</html>
